<style>
  /* Tab container styles */
  .tab-container {
    display: flex;
  }

  /* Tab button styles */
  .tab-button {
    padding: 10px 20px;
    cursor: pointer;
    border: 1px solid #ccc;
    border-bottom: none;
    background-color: #f1f1f1;
    font-size: 16px;
  }

  .tab-button:hover {
    background-color: #ddd;
    border-color: #ddd;
  }

  .tab-button.active {
    background-color: #fff;
    border-bottom: 2px solid #007bff;
  }

  /* Tab content styles */
  .tab-content {
    display: none;
    padding: 20px;
    border: 1px solid #ccc;
    border-top: none;
  }

  .tab-content.active {
    display: block;
  }

  .modal {
    /* display: none; */
    position: fixed;
    /* z-index: 1; */
    left: 0;
    top: 0;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.6);
  }

  .modal-content {
    background-color: #fff;
    margin: 15% auto;
    padding: 20px;
    border: 1px solid #888;
    /* width: 100%; */
    /* max-width: 400px; */
    position: relative;
  }

  .close {
    color: #000;
    float: right;
    font-size: 28px;
    font-weight: bold;
    border: none;
    background: none;
  }

  .close:hover,
  .close:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
    background: none;
  }
  /* Style for the larger dropdowns */
  select {
    font-size: 16px; /* Adjust the font size as needed */
    padding: 6px; /* Adjust the padding as needed */
    width: 200px; /* Adjust the width as needed */
  }

  /* Style for the submit button */
  button {
    font-size: 16px; /* Adjust the font size as needed */
    padding: 7px 15px; /* Adjust the padding as needed */
    background-color: #00356b; /* Blue color for the button */
    /* color: #ffffff; White color for the text */
    border: none;
    cursor: pointer;
  }

  /* Apply hover effect for the button */
  button:hover {
    background-color: #0056b3; /* Darker blue color on hover */
  }
</style>

<div class="page-wrapper">
  <!-- ============================================================== -->
  <!-- Bread crumb and right sidebar toggle -->
  <!-- ============================================================== -->
  <div class="page-breadcrumb bg-white">
    <div class="row align-items-center">
      <div class="col-lg-3 col-md-4 col-sm-4 col-xs-12">
        <h4 style="color: #405a67; text-align: center; font-weight: 800">
          Inspection Monitor
        </h4>
      </div>
      <div class="col-lg-9 col-sm-8 col-md-8 col-xs-12">
        <!-- <div class="d-md-flex">
                    <ol class="breadcrumb ms-auto">
                        <li><a href="#" class="fw-normal">Dashboard</a></li>
                    </ol>
                    <a href="#" target="_blank" class="btn btn-danger  d-none d-md-block pull-right ms-3 hidden-xs hidden-sm waves-effect waves-light text-white">Add new template</a>
                </div> -->
      </div>
    </div>
    <!-- /.col-lg-12 -->
  </div>

  <!-- ============================================================== -->
  <!-- End Bread crumb and right sidebar toggle -->
  <!-- ============================================================== -->
  <!-- ============================================================== -->
  <!-- Container fluid  -->
  <!-- ============================================================== -->
  <div class="container-fluid">
    <!-- ============================================================== -->
    <!-- Three charts -->
    <!-- ============================================================== -->
    <div class="row justify-content-center">
      <!-- <div class="col-lg-4 col-md-12">
                <a href="#create_clus_user" class="text-dark">
                    <div class="white-box analytics-info shadow">
                        <h3 class="box-title">Teachers Enrolled</h3>
                        <ul class="list-inline two-part d-flex align-items-center mb-0">
                            <li>
                                <div id="tecaher-icon">
                                    <i class="fas fa-chalkboard-teacher fa-3x text-success mt-3"></i>
                                </div>
                            </li>
                            <li class="ms-auto"><span class="counter text-success" id="teacher-cnt">9</span></li>
                        </ul>
                    </div>
                </a>
            </div>
            <div class="col-lg-4 col-md-12">
                <a href="#manage_nursery" class="text-dark">
                    <div class="white-box analytics-info shadow">
                        <h3 class="box-title">Nurseries Added</h3>
                        <ul class="list-inline two-part d-flex align-items-center mb-0">
                            <li>
                                <div id="tecaher-icon">
                                    <i class="fas fa-school fa-3x text-primary mt-3"></i>
                                </div>
                            </li>
                            <li class="ms-auto"><span class="counter text-purple" id="nurseries-cnt">3</span></li>
                        </ul>
                    </div>
                </a>
            </div> -->


      <!-- <div class="col-lg-6 col-md-12">
        <div class="container">
          <div class="row">
            <a href="#basic-table" class="text-dark">
              <div class="white-box analytics-info shadow">
                <h3 class="box-title link_color">Inspections Available</h3>
                <ul class="list-inline two-part d-flex align-items-center mb-0">
                  <li>
                    <div id="tecaher-icon">
                      <i class="fas fa-search fa-3x text-info mt-3"></i>
                    </div>
                  </li>
                  <li class="ms-auto">
                    <span class="counter text-info" id="inspections-cnt"
                      >6</span
                    >
                  </li>
                </ul>
              </div>
            </a>
          </div>
        </div>
      </div> -->

      <div class="col-lg-12 col-md-12 m-5">
        <form action="#" method="post" id="myForm">
          <label for="month" class="h4">Select Month:</label>
          <select id="month" name="month">
            <script>
              const months = [
                "January",
                "February",
                "March",
                "April",
                "May",
                "June",
                "July",
                "August",
                "September",
                "October",
                "November",
                "December",
              ];

              const monthSelect = document.getElementById("month");

              // You need to define the startMonth and endMonth values
              const startMonth = 0; // January
              const endMonth = 11; // December

              for (let month = startMonth; month <= endMonth; month++) {
                const option = document.createElement("option");
                option.value = month;
                option.textContent = months[month];
                monthSelect.appendChild(option);
              }

              // Set the stored value for month, if available
              const storedMonth = localStorage.getItem("selectedMonth");
              if (
                storedMonth !== null &&
                storedMonth >= startMonth &&
                storedMonth <= endMonth
              ) {
                monthSelect.value = storedMonth;
              } else {
                // Set the current month as default
                const currentMonth = new Date().getMonth();
                monthSelect.value = currentMonth;
              }

              // Add an event listener to update the stored month value
              monthSelect.addEventListener("change", function () {
                localStorage.setItem("selectedMonth", this.value);
              });
            </script>
          </select>

          <label for="year" class="h4">Select Year:</label>
          <select id="year" name="year">
            <script>
              const startYear = 2022; // Set the starting year
              const endYear = 2025;
              const yearSelect = document.getElementById("year");

              for (let year = startYear; year <= endYear; year++) {
                const option = document.createElement("option");
                option.value = year;
                option.textContent = year;
                yearSelect.appendChild(option);
              }

              // Set the stored value for year, if available
              const storedYear = localStorage.getItem("selectedYear");
              if (storedYear) {
                yearSelect.value = storedYear;
              } else {
                // Set the current year as default
                const currentYear = new Date().getFullYear();
                yearSelect.value = currentYear;
              }

              // Add an event listener to update the stored year value
              yearSelect.addEventListener("change", function () {
                localStorage.setItem("selectedYear", this.value);
              });
            </script>
          </select>

          <button type="button" onclick="getInspctData()" class="text-white">
            Select M/Y
          </button>
        </form>
      </div>

      <script>
        // const form = document.getElementById("myForm");
        // const submitButton = form.querySelector("button");

        // submitButton.addEventListener("click", function () {
        //   // Get selected month and year values
        //   const selectedMonth = document.getElementById("month").value;
        //   const selectedYear = document.getElementById("year").value;

        //   // // Store the selected values in localStorage
        //   // localStorage.setItem("selectedMonth", selectedMonth);
        //   // localStorage.setItem("selectedYear", selectedYear);

        //   // Do something with the selected values, e.g., display them
        //   // alert(`Selected Month: ${selectedMonth}\nSelected Year: ${selectedYear}`);
        // });
      </script>

      <div class="tab-container">
        <button class="tab-button" onclick="openTab('pendingTab')">
          Pending
        </button>
        <button class="tab-button" onclick="openTab('verifiedTab')">
          Verified
        </button>
      </div>

      <div class="tab-content" id="pendingTab">
        <h2>Pending Verfication</h2>
        <table class="table mt-4 bg-white" id="pendingTable">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">User</th>
              <th scope="col">Title</th>
              <th scope="col">Cycle</th>
              <!-- <th scope="col">Year</th> -->
              <th scope="col">Submitted On</th>
              <th scope="col">Action</th>
            </tr>
          </thead>
          <tbody>
            <!-- Table content will be added dynamically -->
          </tbody>
        </table>
      </div>

      <div class="tab-content" id="verifiedTab">
        <h2>Verified Inspections</h2>
        <table class="table mt-4 bg-white" id="verifiedTable">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">User</th>
              <th scope="col">Title</th>
              <th scope="col">Cycle</th>
              <th scope="col">Submitted On</th>
            </tr>
          </thead>
          <tbody>
            <!-- Table content will be added dynamically -->
          </tbody>
        </table>
      </div>

      <div class="modal" id="modalContainer" tabindex="-1">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="submsnTitl"></h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
                onclick="closeModal()"
              ></button>
            </div>
            <div class="modal-body">
              <div id="submission"></div>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                style="background-color: #00356b"
                class="btn btn-secondary text-white"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
                onclick="verifyModal()"
              >
                Verify
              </button>
              <button
                type="button"
                style="background-color: #00356b"
                class="btn btn-secondary text-white"
                data-bs-dismiss="modal"
                onclick="closeModal()"
              >
                Close
              </button>
            </div>
          </div>
        </div>
      </div>

      <script>
        var dataArray = [];

        var selFormId = 0;

        function getInspctData() {
          var filter = JSON.stringify({
            month: $("#month").val(),
            year: $("#year").val(),
          });
          dataArray = JSON.parse(
            requester(server, "POST", {
              api: "get_inspect_for_verify",
              filter: filter,
            }
            )
          );
                  var vrfdTabHTML = "";
                  var pendTabHTML = "";

                  dataArray.forEach((item, index) => {
                    var TabHTML = "";
                    TabHTML += `
                        <tr>
                          <td>${index + 1}</td>
                          <td>${item.name}</td>
                          <td>${item.title}</td>
                          <td>${item.cycle}</td>
                          <td>${item.submitted_on}</td>
                          ${
                            (item.status === "1"
                              ? `<td><button class="text-white" onclick="viewInspPop('${item.submission_id}','${item.user_id}')">View</button></td>`
                              : "")
                          }
                        </tr>
                      `;
                    if (item.status == "1") {
                      pendTabHTML += TabHTML;
                    }
                    if (item.status == "2") {
                      vrfdTabHTML += TabHTML;
                    }
                  });

                  // console.log(pendTabHTML);

                  $("#verifiedTable tbody").html(vrfdTabHTML);
                  $("#pendingTable tbody").html(pendTabHTML);

                  // verifiedTab.innerHTML = vrfdTabHTML;
                  // pendingTab.innerHTML = pendTabHTML;

              //   },
              //   error: function (x, t, m) {
              //     console.log(x,t,m);
              //   },
              // })
          // showAudtDetTabs("pendingTable", "1");
        }

        // console.log($id);

        getInspctData();

        // Function to open the selected tab
        function openTab(tabName) {
          const tabContents = document.getElementsByClassName("tab-content");
          for (let i = 0; i < tabContents.length; i++) {
            tabContents[i].style.display = "none";
          }

          const tabButtons = document.getElementsByClassName("tab-button");
          for (let i = 0; i < tabButtons.length; i++) {
            tabButtons[i].classList.remove("active");
          }

          document.getElementById(tabName).style.display = "block";
          document.querySelector(`button[onclick="openTab('${tabName}')"]`)
            .classList.add("active");

          // if (tabName === "pendingTab") {
          //   showAudtDetTabs("pendingTable", "1");
          // } else if (tabName === "verifiedTab") {
          //   showAudtDetTabs("verifiedTable", "2");
          // }
        }


        // Function to close the modal
        function closeModal() {
          const modalContainer = document.getElementById("modalContainer");
          modalContainer.style.display = "none";
        }

        // Function to verify the modal
        function verifyModal() {
          var data = JSON.stringify({ id: selFormId, status: 2 });
          var user_det = JSON.parse(
            requester(server, "POST", {
              api: "update_verify_inspect",
              data: data,
            })
          );
          // showAudtDetTabs("verifiedTable", "2");

          const modalContainer = document.getElementById("modalContainer");
          modalContainer.style.display = "none";
          window.location.reload();
        }

        openTab("pendingTab");
      </script>

    </div>
    <footer class="footer text-center">
      2023 © Kido | All rights reserved
      <a href="https://kido.school/en/">Kido School</a>
    </footer>
  </div>


  <script>

  </script>
</div>
