<style>
  /* Tab container styles */
  .tab-container {
    display: flex;
  }

  /* Tab button styles */
  .tab-button {
    padding: 10px 20px;
    cursor: pointer;
    border: 1px solid #ccc;
    border-bottom: none;
    background-color: #f1f1f1;
    font-size: 16px;
  }

  .tab-button:hover {
    background-color: #ddd;
    border-color: #ddd;
  }

  .tab-button.active {
    background-color: #fff;
    border-bottom: 2px solid #007bff;
  }

  /* Tab content styles */
  .tab-content {
    display: none;
    padding: 20px;
    border: 1px solid #ccc;
    border-top: none;
  }

  .tab-content.active {
    display: block;
  }

  .modal {
    /* display: none; */
    position: fixed;
    /* z-index: 1; */
    left: 0;
    top: 0;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.6);
  }

  .modal-content {
    background-color: #fff;
    margin: 15% auto;
    padding: 20px;
    border: 1px solid #888;
    /* width: 100%; */
    /* max-width: 400px; */
    position: relative;
  }

  .close {
    color: #000;
    float: right;
    font-size: 28px;
    font-weight: bold;
    border: none;
    background: none;
  }

  .close:hover,
  .close:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
    background: none;
  }
  /* Style for the larger dropdowns */
  select {
    font-size: 16px; /* Adjust the font size as needed */
    padding: 6px; /* Adjust the padding as needed */
    width: 200px; /* Adjust the width as needed */
  }

  /* Style for the submit button */
  button {
    font-size: 16px; /* Adjust the font size as needed */
    padding: 7px 15px; /* Adjust the padding as needed */
    background-color: #00356b; /* Blue color for the button */
    /* color: #ffffff; White color for the text */
    border: none;
    cursor: pointer;
  }

  /* Apply hover effect for the button */
  button:hover {
    background-color: #0056b3; /* Darker blue color on hover */
  }
</style>

<div class="page-wrapper">
  <!-- ============================================================== -->
  <!-- Bread crumb and right sidebar toggle -->
  <!-- ============================================================== -->
  <div class="page-breadcrumb bg-white">
    <div class="row align-items-center">
      <div class="col-lg-3 col-md-4 col-sm-4 col-xs-12">
        <h4 style="color: #405a67; text-align: center; font-weight: 800">
          Inspection Monitor
        </h4>
      </div>
      <div class="col-lg-9 col-sm-8 col-md-8 col-xs-12">
        <!-- <div class="d-md-flex">
                    <ol class="breadcrumb ms-auto">
                        <li><a href="#" class="fw-normal">Dashboard</a></li>
                    </ol>
                    <a href="#" target="_blank" class="btn btn-danger  d-none d-md-block pull-right ms-3 hidden-xs hidden-sm waves-effect waves-light text-white">Add new template</a>
                </div> -->
      </div>
    </div>
    <!-- /.col-lg-12 -->
  </div>

  <!-- ============================================================== -->
  <!-- End Bread crumb and right sidebar toggle -->
  <!-- ============================================================== -->
  <!-- ============================================================== -->
  <!-- Container fluid  -->
  <!-- ============================================================== -->
  <div class="container-fluid">
    <!-- ============================================================== -->
    <!-- Three charts -->
    <!-- ============================================================== -->
    <div class="row justify-content-center">
      <!-- <div class="col-lg-4 col-md-12">
                <a href="#create_clus_user" class="text-dark">
                    <div class="white-box analytics-info shadow">
                        <h3 class="box-title">Teachers Enrolled</h3>
                        <ul class="list-inline two-part d-flex align-items-center mb-0">
                            <li>
                                <div id="tecaher-icon">
                                    <i class="fas fa-chalkboard-teacher fa-3x text-success mt-3"></i>
                                </div>
                            </li>
                            <li class="ms-auto"><span class="counter text-success" id="teacher-cnt">9</span></li>
                        </ul>
                    </div>
                </a>
            </div>
            <div class="col-lg-4 col-md-12">
                <a href="#manage_nursery" class="text-dark">
                    <div class="white-box analytics-info shadow">
                        <h3 class="box-title">Nurseries Added</h3>
                        <ul class="list-inline two-part d-flex align-items-center mb-0">
                            <li>
                                <div id="tecaher-icon">
                                    <i class="fas fa-school fa-3x text-primary mt-3"></i>
                                </div>
                            </li>
                            <li class="ms-auto"><span class="counter text-purple" id="nurseries-cnt">3</span></li>
                        </ul>
                    </div>
                </a>
            </div> -->


      <!-- <div class="col-lg-6 col-md-12">
        <div class="container">
          <div class="row">
            <a href="#basic-table" class="text-dark">
              <div class="white-box analytics-info shadow">
                <h3 class="box-title link_color">Inspections Available</h3>
                <ul class="list-inline two-part d-flex align-items-center mb-0">
                  <li>
                    <div id="tecaher-icon">
                      <i class="fas fa-search fa-3x text-info mt-3"></i>
                    </div>
                  </li>
                  <li class="ms-auto">
                    <span class="counter text-info" id="inspections-cnt"
                      >6</span
                    >
                  </li>
                </ul>
              </div>
            </a>
          </div>
        </div>
      </div> -->

      <div class="col-lg-12 col-md-12 m-5">
        <form action="#" method="post" id="myForm">
          <label for="month" class="h4">Select Month:</label>
          <select id="month" name="month">
            <script>
              const months = [
                "January",
                "February",
                "March",
                "April",
                "May",
                "June",
                "July",
                "August",
                "September",
                "October",
                "November",
                "December",
              ];

              const monthSelect = document.getElementById("month");

              // You need to define the startMonth and endMonth values
              const startMonth = 0; // January
              const endMonth = 11; // December

              for (let month = startMonth; month <= endMonth; month++) {
                const option = document.createElement("option");
                option.value = month;
                option.textContent = months[month];
                monthSelect.appendChild(option);
              }

              // Set the stored value for month, if available
              const storedMonth = localStorage.getItem("selectedMonth");
              if (
                storedMonth !== null &&
                storedMonth >= startMonth &&
                storedMonth <= endMonth
              ) {
                monthSelect.value = storedMonth;
              } else {
                // Set the current month as default
                const currentMonth = new Date().getMonth();
                monthSelect.value = currentMonth;
              }

              // Add an event listener to update the stored month value
              monthSelect.addEventListener("change", function () {
                localStorage.setItem("selectedMonth", this.value);
              });
            </script>
          </select>

          <label for="year" class="h4">Select Year:</label>
          <select id="year" name="year">
            <script>
              const startYear = 2022; // Set the starting year
              const endYear = 2025;
              const yearSelect = document.getElementById("year");

              for (let year = startYear; year <= endYear; year++) {
                const option = document.createElement("option");
                option.value = year;
                option.textContent = year;
                yearSelect.appendChild(option);
              }

              // Set the stored value for year, if available
              const storedYear = localStorage.getItem("selectedYear");
              if (storedYear) {
                yearSelect.value = storedYear;
              } else {
                // Set the current year as default
                const currentYear = new Date().getFullYear();
                yearSelect.value = currentYear;
              }

              // Add an event listener to update the stored year value
              yearSelect.addEventListener("change", function () {
                localStorage.setItem("selectedYear", this.value);
              });
            </script>
          </select>

          <button type="button" onclick="getInspctData()" class="text-white">
            Select M/Y
          </button>
        </form>
      </div>

      <script>
        // const form = document.getElementById("myForm");
        // const submitButton = form.querySelector("button");

        // submitButton.addEventListener("click", function () {
        //   // Get selected month and year values
        //   const selectedMonth = document.getElementById("month").value;
        //   const selectedYear = document.getElementById("year").value;

        //   // // Store the selected values in localStorage
        //   // localStorage.setItem("selectedMonth", selectedMonth);
        //   // localStorage.setItem("selectedYear", selectedYear);

        //   // Do something with the selected values, e.g., display them
        //   // alert(`Selected Month: ${selectedMonth}\nSelected Year: ${selectedYear}`);
        // });
      </script>

      <div class="tab-container">
        <button class="tab-button" onclick="openTab('pendingTab')">
          Pending
        </button>
        <button class="tab-button" onclick="openTab('verifiedTab')">
          Verified
        </button>
      </div>

      <div class="tab-content" id="pendingTab">
        <h2>Pending  Inspections</h2>
        <table class="table mt-4 bg-white" id="pendingTable">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">User</th>
              <th scope="col">Title</th>
              <!-- <th scope="col">user id</th> -->
              <!-- <th scope="col">Year</th> -->
              <th scope="col">Submitted On</th>
              <th scope="col">Action</th>
            </tr>
          </thead>
          <tbody>
            <!-- Table content will be added dynamically -->
          </tbody>
        </table>
      </div>

      <div class="tab-content" id="verifiedTab">
        <h2>Verified Inspections</h2>
        <table class="table mt-4 bg-white" id="verifiedTable">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">User</th>
              <th scope="col">Title</th>
              <th scope="col">user id</th>
              <th scope="col">Year</th>
              <th scope="col">Submitted On</th>
              <!-- <th scope="col">Action</th> -->
            </tr>
          </thead>
          <tbody>
            <!-- Table content will be added dynamically -->
          </tbody>
        </table>
      </div>

      <div class="modal" id="modalContainer" tabindex="-1">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Submissions Form</h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
                onclick="closeModal()"
              ></button>
            </div>
            <div class="modal-body">
              <div id="submission"></div>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                style="background-color: #00356b"
                class="btn btn-secondary text-white"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
                onclick="verifyModal()"
              >
                Verify
              </button>
              <button
                type="button"
                style="background-color: #00356b"
                class="btn btn-secondary text-white"
                data-bs-dismiss="modal"
                onclick="closeModal()"
              >
                Close
              </button>
            </div>
          </div>
        </div>
      </div>

      <script>
        var dataArray = [];

        var selFormId = 0;

        function getInspctData() {
          var filter = JSON.stringify({
            month: $("#month").val(),
            year: $("#year").val(),
          });
          dataArray = JSON.parse(
            requester(server, "POST", {
              api: "get_inspect_for_verify",
              filter: filter,
            })
          );

          showTable("pendingTable", "1");
        }

        // console.log($id);

        getInspctData();

        // Function to open the selected tab
        function openTab(tabName) {
          const tabContents = document.getElementsByClassName("tab-content");
          for (let i = 0; i < tabContents.length; i++) {
            tabContents[i].style.display = "none";
          }

          const tabButtons = document.getElementsByClassName("tab-button");
          for (let i = 0; i < tabButtons.length; i++) {
            tabButtons[i].classList.remove("active");
          }

          document.getElementById(tabName).style.display = "block";
          document
            .querySelector(`button[onclick="openTab('${tabName}')"]`)
            .classList.add("active");

          if (tabName === "pendingTab") {
            showTable("pendingTable", "1");
          } else if (tabName === "verifiedTab") {
            showTable("verifiedTable", "2");
          }
        }

        // Function to generate the table for the "Pending" and "Verified" tabs
        function showTable(tableId, status) {
          const tableBody = document.querySelector(`#${tableId} tbody`);
          let tableHTML = "";

          dataArray.forEach((item, index) => {
            if (item.status === status) {
              tableHTML += `
                <tr>
                  <td>${index + 1}</td>
                  <td>${item.name}</td>
                  <td>${item.title}</td>
                  <td>${item.submitted_on}</td>
                  ${
                    (status === "1"
                      ? `<td><button class="text-white" onclick="viewAlert('${item.submission_id}','${item.user_id}')">View</button></td>`
                      : "")
                  }
                </tr>
              `;
            }
          });
          tableBody.innerHTML = tableHTML;
        }

        // Function to display the modal on button click
        function viewAlert(submissionId, userId) {
          selFormId = submissionId;
          const user = dataArray.find((item) => item.user_id === userId);
          const modalText = document.getElementById("submission");
          getFormData("submission", user.submission);
          const modalContainer = document.getElementById("modalContainer");
          modalContainer.style.display = "block";
        }

        // Function to close the modal
        function closeModal() {
          const modalContainer = document.getElementById("modalContainer");
          modalContainer.style.display = "none";
        }

        // Function to verify the modal
        function verifyModal() {
          var data = JSON.stringify({ id: selFormId, status: 2 });
          var user_det = JSON.parse(
            requester(server, "POST", {
              api: "update_verify_inspect",
              data: data,
            })
          );
          showTable("verifiedTable", "2");

          const modalContainer = document.getElementById("modalContainer");
          modalContainer.style.display = "none";
          window.location.reload();
        }
        // Open the appropriate default tab based on the status
        // if (dataArray.some((item) => item.status === "2")) {
        //   openTab("pendingTab");
        // } else {
        //   openTab("verifiedTab");
        // }
        openTab("pendingTab");
      </script>

      <!-- ============================================================== -->
      <!-- Three charts -->
      <!-- ============================================================== -->
      <!-- <div class="row justify-content-center">
            <div class="col-lg-8 col-md-8">
                <div class="white-box analytics-info shadow">
                    <div class="d-flex justify-content-between mb-2">
                        <h3 class="box-title">Cluster Name</h3>
                        <h5>Mumbai-cluster</h5>
                    </div>
                    <div class="d-flex justify-content-between mb-2">
                        <h3 class="box-title">Country</h3>
                        <h5>India</h5>
                    </div>
                    <div class="d-flex justify-content-between mb-2">
                        <h3 class="box-title">State</h3>
                        <h5>Maharashtra</h5>
                    </div>
                    <div class="d-flex justify-content-between mb-2">
                        <h3 class="box-title">City</h3>
                        <h5>Mumbai</h5>
                    </div>
                    
                </div>
            </div>
        </div> -->
      <!-- ============================================================== -->
      <!-- PRODUCTS YEARLY SALES -->
      <!-- ============================================================== -->
      <!-- <div class="row">
            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                <div class="white-box">
                    <h3 class="box-title">Products Yearly Sales</h3>
                    <div class="d-md-flex">
                        <ul class="list-inline d-flex ms-auto">
                            <li class="ps-3">
                                <h5><i class="fa fa-circle me-1 text-info"></i>Mac</h5>
                            </li>
                            <li class="ps-3">
                                <h5><i class="fa fa-circle me-1 text-inverse"></i>Windows</h5>
                            </li>
                        </ul>
                    </div>
                    <div id="ct-visits" style="height: 405px;">
                        <div class="chartist-tooltip" style="top: -17px; left: -12px;"><span
                                class="chartist-tooltip-value">6</span>
                        </div>
                    </div>
                </div>
            </div>
        </div> -->
      <!-- ============================================================== -->
      <!-- RECENT SALES -->
      <!-- ============================================================== -->
      <!-- <div class="row">
            <div class="col-md-12 col-lg-12 col-sm-12">
                <div class="white-box">
                    <div class="d-md-flex mb-3">
                        <h3 class="box-title mb-0">Recent sales</h3>
                        <div class="col-md-3 col-sm-4 col-xs-6 ms-auto">
                            <select class="form-select shadow-none row border-top">
                                <option>March 2021</option>
                                <option>April 2021</option>
                                <option>May 2021</option>
                                <option>June 2021</option>
                                <option>July 2021</option>
                            </select>
                        </div>
                    </div>
                    <div class="table-responsive">
                        <table class="table no-wrap">
                            <thead>
                                <tr>
                                    <th class="border-top-0">#</th>
                                    <th class="border-top-0">Name</th>
                                    <th class="border-top-0">Status</th>
                                    <th class="border-top-0">Date</th>
                                    <th class="border-top-0">Price</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>1</td>
                                    <td class="txt-oflo">Elite admin</td>
                                    <td>SALE</td>
                                    <td class="txt-oflo">April 18, 2021</td>
                                    <td><span class="text-success">$24</span></td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td class="txt-oflo">Real Homes WP Theme</td>
                                    <td>EXTENDED</td>
                                    <td class="txt-oflo">April 19, 2021</td>
                                    <td><span class="text-info">$1250</span></td>
                                </tr>
                                <tr>
                                    <td>3</td>
                                    <td class="txt-oflo">Ample Admin</td>
                                    <td>EXTENDED</td>
                                    <td class="txt-oflo">April 19, 2021</td>
                                    <td><span class="text-info">$1250</span></td>
                                </tr>
                                <tr>
                                    <td>4</td>
                                    <td class="txt-oflo">Medical Pro WP Theme</td>
                                    <td>TAX</td>
                                    <td class="txt-oflo">April 20, 2021</td>
                                    <td><span class="text-danger">-$24</span></td>
                                </tr>
                                <tr>
                                    <td>5</td>
                                    <td class="txt-oflo">Hosting press html</td>
                                    <td>SALE</td>
                                    <td class="txt-oflo">April 21, 2021</td>
                                    <td><span class="text-success">$24</span></td>
                                </tr>
                                <tr>
                                    <td>6</td>
                                    <td class="txt-oflo">Digital Agency PSD</td>
                                    <td>SALE</td>
                                    <td class="txt-oflo">April 23, 2021</td>
                                    <td><span class="text-danger">-$14</span></td>
                                </tr>
                                <tr>
                                    <td>7</td>
                                    <td class="txt-oflo">Helping Hands WP Theme</td>
                                    <td>MEMBER</td>
                                    <td class="txt-oflo">April 22, 2021</td>
                                    <td><span class="text-success">$64</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div> -->
    </div>
    <!-- ============================================================== -->
    <!-- End Container fluid  -->
    <!-- ============================================================== -->
    <!-- ============================================================== -->
    <!-- footer -->
    <!-- ============================================================== -->
    <footer class="footer text-center">
      2023 Â© Kido | All rights reserved
      <a href="https://kido.school/en/">Kido School</a>
    </footer>
    <!-- ============================================================== -->
    <!-- End footer -->
    <!-- ============================================================== -->
  </div>

  <!-- <script src="plugins/bower_components/chartist/dist/chartist.min.js"></script>
<script src="plugins/bower_components/chartist-plugin-tooltips/dist/chartist-plugin-tooltip.min.js"></script>
<script src="js/pages/dashboards/dashboard1.js"></script> -->

  <script>
    // var form = new FormData();
    // form.append("api", "cluster_admin_analytics");
    // var cluster_data = local_get('logged_user');
    // var cluster_id  = cluster_data.clutrs[0].cluster_id;
    // // console.log(cluster_id);
    // form.append("cluster_id", cluster_id);
    // form.append("country", cluster_data.country);

    // var settings = {
    //   "url": server,
    //   "method": "POST",
    //   "timeout": 0,
    //   "processData": false,
    //   "mimeType": "multipart/form-data",
    //   "contentType": false,
    //   "data": form
    // };

    // $.ajax(settings).done(function (response) {
    //   var resp = JSON.parse(response);
    //     if(resp.length){
    //         $("#teacher-cnt").text(resp[0].users);
    //         $("#nurseries-cnt").text(resp[0].nurseries);
    //         $("#inspections-cnt").text(resp[0].inspections);
    //     }else{
    //         $("#teacher-cnt").text(0);
    //         $("#nurseries-cnt").text(0);
    //         $("#inspections-cnt").text(0);
    //     }
    // });
  </script>
</div>
