<div class="page-wrapper">
    <div class="container-fluid">
        <!-- <div class="row"> 
            <h3>Test</h3>
        </div> -->

        <div class="row"> 
            <div class="col-lg-6">

                <div class="table-responsive">
                    <table class="table text-nowrap" id="user_list">
                        <thead>
                            <tr>
                                <th class="border-top-0">User</th>
                                <th class="border-top-0">Email</th>
                                <th class="border-top-0">Team</th>
                                <!-- <th class="border-top-0">Sent Before</th>
                                <th class="border-top-0">Select All</th> -->
                            </tr>
                        </thead>
                        <tbody id="user_submission_trs">

                        </tbody>
                    </table>
                </div>

            </div>

            <div class="col-lg-6">

                <h5> Submitted Form</h5>

                <div id="form_div">

                </div>

            </div>

        </div>
    </div>
</div>

<script>

// submitted_users
// updt_usr_list_tbl("user_list");
    var submitted_users = [];
    var tabl_id = "user_list";
    $.each(local_get("submitted_users"), function (k, v) {
        submitted_users.push(v.user_id);
    });
    var filter = JSON.stringify({"id":submitted_users});
    // var filter = local_get("logged_user");
    var inspects = JSON.parse(requester(server,"POST",{'api':'get_users','filter':filter}));
    $("#user_trs").empty();
    var trs = "";
    $.each(inspects, function (k, v) {
        // trs += '<tr><td>'+v.name+'</td> <td>'+v.email+'</td><td usr="'+v.email+'" >No</td><td><input type="checkbox" value="'+v.email+'"></td></tr>';
        var team = (v.team).replaceAll("-"," ");
        trs += '<tr uid="'+v.id+'" class="user_list_tr"><td class="name">'+v.name+'</td> <td class="email">'+v.email+'</td><td>'+team+'</td></tr>';
        // trs += '<tr class="user_list_tr"><td>'+v.name+'</td> <td>'+v.email+'</td></tr>';
    });
    var tbody = $('#'+tabl_id).find("tbody");
    tbody.append(trs);
    $('#'+tabl_id).DataTable();


//------------------------------------- EDIT FORM / NEW FORM ----------------------------------

    try{
        if(form_id){

            console.log(form_id);

            // var filter = JSON.stringify({"inspection_id":form_id});
            // var inspects = JSON.parse(requester(server,"POST",{'api':'submitted_get_users','filter':filter}));
            // $("#user_trs").empty();
            // console.log(inspects);
            // var trs = "";
            // $.each(inspects, function (k, v) {
            //     var team = (v.team).replaceAll("-"," ");
            //     trs += '<tr uid="'+v.id+'" class="user_list_tr"><td class="name">'+v.name+'</td> <td class="email">'+v.email+'</td><td>'+team+'</td></tr>';
            // });
            // var tbody = $('#'+tabl_id).find("tbody");
            // tbody.append(trs);
            // $('#'+tabl_id).DataTable();



            // var form_id = url.searchParams.get("form_id");
            // var filter = JSON.stringify({"id":form_id});
            // var inspects = JSON.parse(requester(server,"POST",{'api':'get_inspect','filter':filter}));
            // // console.log(inspects);
            // var formRenderOpts = {
            //     dataType: 'json',
            //     formData: inspects[0]['content']
            // };
            // $("#title").text(inspects[0]['title']);
            // var renderedForm = $('<div>');
            // renderedForm.formRender(formRenderOpts);
            // console.log(renderedForm[0].innerHTML);
            // $("#form_div").html(renderedForm[0].innerHTML);
        }
    }catch(error){
        // console.log(error);
        cust_navigate("basic-table");
    }
</script>